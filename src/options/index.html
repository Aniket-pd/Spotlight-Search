<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Spotlight Preferences</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="../../icons/default.svg" />
    <style>
      :root {
        color-scheme: light dark;
        --font-stack: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        --surface: rgb(248 250 252 / 0.85);
        --surface-dark: rgb(15 23 42 / 0.65);
        --border: rgba(148, 163, 184, 0.4);
        --border-dark: rgba(148, 163, 184, 0.25);
        --accent: #4f46e5;
        --accent-contrast: #ffffff;
      }

      @media (prefers-color-scheme: dark) {
        body {
          background: radial-gradient(circle at top, rgba(79, 70, 229, 0.12), transparent 55%),
            radial-gradient(circle at bottom, rgba(14, 165, 233, 0.12), transparent 60%),
            #0f172a;
        }
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: var(--font-stack);
        background: radial-gradient(circle at top, rgba(79, 70, 229, 0.15), transparent 55%),
          radial-gradient(circle at bottom, rgba(14, 165, 233, 0.15), transparent 60%),
          #f8fafc;
        min-height: 100vh;
        color: #0f172a;
        padding: 32px 16px 48px;
        display: flex;
        justify-content: center;
      }

      .options-card {
        width: min(720px, 100%);
        background: color-mix(in srgb, var(--surface) 70%, white 30%);
        border: 1px solid var(--border);
        border-radius: 20px;
        padding: 32px;
        backdrop-filter: blur(18px);
        box-shadow: 0 24px 48px rgba(15, 23, 42, 0.08);
      }

      @media (prefers-color-scheme: dark) {
        body {
          color: #e2e8f0;
        }
        .options-card {
          background: color-mix(in srgb, var(--surface-dark) 80%, rgba(15, 23, 42, 0.9) 20%);
          border-color: var(--border-dark);
          box-shadow: 0 24px 56px rgba(2, 6, 23, 0.7);
        }
        a {
          color: #a5b4fc;
        }
      }

      h1 {
        margin-top: 0;
        margin-bottom: 8px;
        font-size: clamp(1.8rem, 2.4vw, 2.4rem);
        letter-spacing: -0.02em;
      }

      p.description {
        margin: 0 0 24px;
        color: rgba(15, 23, 42, 0.72);
      }

      @media (prefers-color-scheme: dark) {
        p.description {
          color: rgba(226, 232, 240, 0.74);
        }
      }

      section + section {
        margin-top: 32px;
      }

      h2 {
        font-size: 1.1rem;
        margin: 0 0 8px;
      }

      .section-description {
        margin: 0 0 16px;
        color: rgba(15, 23, 42, 0.6);
      }

      @media (prefers-color-scheme: dark) {
        .section-description {
          color: rgba(226, 232, 240, 0.65);
        }
      }

      .toggle-list {
        display: grid;
        gap: 12px;
      }

      .toggle {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 16px;
        border: 1px solid var(--border);
        border-radius: 14px;
        background: rgba(255, 255, 255, 0.85);
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }

      .toggle:hover {
        border-color: rgba(79, 70, 229, 0.45);
        box-shadow: 0 12px 24px rgba(79, 70, 229, 0.08);
      }

      @media (prefers-color-scheme: dark) {
        .toggle {
          background: rgba(15, 23, 42, 0.35);
          border-color: rgba(148, 163, 184, 0.25);
        }
        .toggle:hover {
          border-color: rgba(129, 140, 248, 0.5);
          box-shadow: 0 12px 28px rgba(129, 140, 248, 0.12);
        }
      }

      .toggle-label {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .toggle-label span:first-child {
        font-weight: 600;
      }

      .toggle-label span:last-child {
        color: rgba(15, 23, 42, 0.58);
        font-size: 0.9rem;
      }

      @media (prefers-color-scheme: dark) {
        .toggle-label span:last-child {
          color: rgba(226, 232, 240, 0.6);
        }
      }

      .switch {
        position: relative;
        width: 48px;
        height: 28px;
      }

      .switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }

      .slider {
        position: absolute;
        cursor: pointer;
        inset: 0;
        background-color: rgba(148, 163, 184, 0.55);
        border-radius: 9999px;
        transition: background 0.2s ease;
      }

      .slider::before {
        position: absolute;
        content: "";
        height: 22px;
        width: 22px;
        left: 3px;
        top: 3px;
        background-color: #ffffff;
        border-radius: 50%;
        transition: transform 0.2s ease, background-color 0.2s ease;
        box-shadow: 0 6px 16px rgba(79, 70, 229, 0.15);
      }

      input:checked + .slider {
        background: linear-gradient(135deg, #6366f1, #0ea5e9);
      }

      input:checked + .slider::before {
        transform: translateX(20px);
      }

      .search-select {
        margin-top: 16px;
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .search-select label {
        font-weight: 600;
      }

      select {
        appearance: none;
        padding: 10px 12px;
        border-radius: 10px;
        border: 1px solid var(--border);
        font-size: 1rem;
        font-family: inherit;
        background: rgba(255, 255, 255, 0.9);
        transition: border 0.2s ease, box-shadow 0.2s ease;
      }

      select:focus {
        outline: none;
        border-color: rgba(79, 70, 229, 0.65);
        box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.15);
      }

      @media (prefers-color-scheme: dark) {
        select {
          background: rgba(15, 23, 42, 0.4);
          border-color: rgba(148, 163, 184, 0.25);
          color: inherit;
        }
      }

      .status {
        margin-top: 24px;
        font-size: 0.95rem;
        color: rgba(15, 23, 42, 0.58);
        min-height: 1.2em;
      }

      @media (prefers-color-scheme: dark) {
        .status {
          color: rgba(226, 232, 240, 0.6);
        }
      }
    </style>
  </head>
  <body>
    <div class="options-card">
      <h1>Spotlight Preferences</h1>
      <p class="description">
        Choose which browser data Spotlight indexes and set your preferred web search engine for quick lookups.
      </p>

      <section aria-labelledby="data-sources-heading">
        <h2 id="data-sources-heading">Indexed data sources</h2>
        <p class="section-description">Toggle the browser data Spotlight should include in the search index.</p>
        <div class="toggle-list" id="data-source-toggles"></div>
      </section>

      <section aria-labelledby="search-engine-heading">
        <h2 id="search-engine-heading">Default web search</h2>
        <p class="section-description">
          Choose the search engine Spotlight should use when you run a web search from the command bar.
        </p>
        <div class="search-select">
          <label for="search-engine-select">Search engine</label>
          <select id="search-engine-select"></select>
        </div>
      </section>

      <div class="status" role="status" aria-live="polite" id="status"></div>
    </div>

    <script src="../shared/web-search.js"></script>
    <script src="index.js"></script>
  </body>
</html>
